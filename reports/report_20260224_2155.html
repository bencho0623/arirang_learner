<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Arirang Learner Report</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --ink: #1f2937;
      --muted: #6b7280;
      --line: #dbe1ea;
      --accent: #1e40af;
      --good: #15803d;
      --warn: #b45309;
      --bad: #b91c1c;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: "Segoe UI", "Noto Sans KR", sans-serif;
    }
    .container {
      max-width: 1120px;
      margin: 0 auto;
      padding: 20px;
      display: grid;
      gap: 16px;
    }
    .panel {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 16px;
    }
    .hero {
      color: #fff;
      border: 0;
      background:
        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.22), transparent 35%),
        linear-gradient(135deg, #1d4ed8 0%, #0f766e 55%, #0b132b 100%);
    }
    .hero h1 { margin: 0 0 8px; font-size: 24px; }
    .hero .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 12px;
      font-size: 14px;
      opacity: 0.95;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.2);
      font-weight: 600;
    }
    .header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .cefr-chart {
      display: flex;
      align-items: end;
      gap: 8px;
      min-height: 74px;
    }
    .cefr-col {
      width: 34px;
      text-align: center;
      font-size: 11px;
      color: #e2e8f0;
    }
    .cefr-bar {
      width: 100%;
      border-radius: 8px 8px 2px 2px;
      background: rgba(255,255,255,0.86);
      margin-bottom: 4px;
      min-height: 6px;
    }
    .audio-wrap { display: block; }
    audio { width: 100%; }
    .script-box {
      max-height: 400px;
      overflow: auto;
      white-space: pre-wrap;
      line-height: 1.7;
      padding: 12px;
      border: 1px solid var(--line);
      border-radius: 10px;
      background: #fbfdff;
    }
    .script-box.expanded {
      max-height: none;
    }
    .script-tools {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 8px;
    }
    .script-hint {
      font-size: 12px;
      color: var(--muted);
    }
    .script-toggle {
      border: 1px solid var(--line);
      background: #fff;
      color: var(--ink);
      border-radius: 8px;
      padding: 6px 10px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
    }
    mark {
      background: transparent;
      cursor: pointer;
      padding: 0 1px;
      border-radius: 2px;
      transition: background 0.15s ease;
    }
    mark:hover { background: rgba(59,130,246,0.12); }
    .mark-b2 { border-bottom: 3px solid #facc15; }
    .mark-c1 { border-bottom: 3px solid #fb923c; }
    .mark-c2 { border-bottom: 3px solid #ef4444; }
    .cards-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }
    .v-card {
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
      background: #fff;
      position: relative;
    }
    .v-card.bookmarked {
      border: 2px solid #f59e0b;
      box-shadow: 0 0 0 2px rgba(245,158,11,0.15) inset;
    }
    .card-top {
      display: flex;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 8px;
      padding-right: 28px;
    }
    .word { font-size: 20px; font-weight: 700; }
    .cefr {
      font-size: 11px;
      font-weight: 700;
      border-radius: 999px;
      border: 1px solid var(--line);
      padding: 2px 8px;
    }
    .phonetic { color: var(--muted); font-size: 13px; }
    .sub {
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 8px;
    }
    .bookmark-btn {
      position: absolute;
      right: 8px;
      top: 8px;
      border: 0;
      background: transparent;
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
    }
    .bookmark-btn[aria-pressed="true"] { filter: saturate(160%); }
    .card-body { display: none; margin-top: 8px; }
    .v-card.open .card-body { display: block; }
    .def-box {
      background: #f3f4f6;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 8px;
      font-size: 14px;
    }
    .ko {
      color: var(--good);
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }
    .example {
      font-style: italic;
      color: #374151;
      margin-bottom: 8px;
      font-size: 14px;
    }
    .context {
      border-left: 4px solid #3b82f6;
      padding: 8px;
      background: #eff6ff;
      border-radius: 6px;
      margin-bottom: 8px;
      font-size: 14px;
    }
    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .tag {
      border: 1px solid var(--line);
      border-radius: 999px;
      font-size: 12px;
      padding: 2px 8px;
      color: #374151;
      background: #fff;
    }
    .quiz-list { display: grid; gap: 12px; }
    .q {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: #fff;
    }
    .q .stem { margin-bottom: 8px; }
    .choices {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
    }
    .choice {
      border: 1px solid var(--line);
      background: #fff;
      border-radius: 8px;
      padding: 8px;
      text-align: left;
      cursor: pointer;
    }
    .choice.correct { background: #dcfce7; border-color: #16a34a; }
    .choice.wrong { background: #fee2e2; border-color: #ef4444; }
    .q-result {
      margin-top: 8px;
      font-size: 13px;
      color: #334155;
    }
    .progress {
      height: 10px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 8px;
    }
    .progress > i {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #16a34a, #22c55e);
      transition: width 0.2s ease;
    }
    @media (max-width: 600px) {
      .cards-grid { grid-template-columns: 1fr; }
      .choices { grid-template-columns: 1fr; }
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b1220;
        --card: #111827;
        --ink: #e5e7eb;
        --muted: #9ca3af;
        --line: #253041;
      }
      .script-box { background: #0f172a; }
      .def-box { background: #1f2937; }
      .context { background: #0b2947; }
      .choice { background: #0f172a; }
      .q { background: #111827; }
    }
    @media print {
      .audio-wrap, .quiz-section { display: none !important; }
      .v-card .card-body { display: block !important; }
      .container { max-width: 100%; padding: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <section class="panel hero">
      <h1 id="news-title"></h1>
      <div class="meta" id="news-meta"></div>
      <div class="header-row">
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <span class="badge" id="vocab-count-badge"></span>
          <span class="badge" id="bookmark-count-badge">Î∂ÅÎßàÌÅ¨ 0Í∞ú</span>
        </div>
        <div class="cefr-chart" id="cefr-chart"></div>
      </div>
    </section>

    <section class="panel audio-wrap" id="audio-section">
      <h2>Audio Player</h2>
      <audio controls id="audio-player"></audio>
    </section>

    <section class="panel">
      <h2>Script Viewer</h2>
      <div class="script-tools">
        <div class="script-hint">Ïä§ÌÅ¨Î°§Î°ú Ï†ÑÏ≤¥ ÌôïÏù∏ Í∞ÄÎä• ¬∑ ÌïÑÏöî Ïãú Ï†ÑÏ≤¥Î≥¥Í∏∞</div>
        <button id="script-toggle" class="script-toggle" type="button">Ï†ÑÏ≤¥Î≥¥Í∏∞</button>
      </div>
      <div class="script-box" id="script-box"></div>
    </section>

    <section class="panel">
      <div class="cards-head">
        <h2 style="margin:0;">Vocabulary Cards</h2>
      </div>
      <div class="cards-grid" id="cards-grid"></div>
    </section>

    <section class="panel quiz-section" id="quiz-section">
      <h2>ÎπàÏπ∏ ÌÄ¥Ï¶à</h2>
      <div id="quiz-score">0 / 0</div>
      <div class="progress"><i id="quiz-progress"></i></div>
      <div class="quiz-list" id="quiz-list" style="margin-top:12px;"></div>
    </section>
  </div>

  <script>
    const episode = {"date_display": "2026.02.24", "airtime": "21:55", "title": "21:55 Arirang News", "mp3_filename": "20260224_2155_arirang.mp3", "mp3_url": "", "script_text": "Welcome to Arirang News.\nThis is Key Kim.\nWe start with the top headlines at this hour. 1.\nSpeaking at a Cabinet meeting on Tuesday, President Lee praised Team Korea's determination and resilience.\nHe also called for measures to make it easier for the public to watch such international sporting events, noting that this year's Olympics did not generate the level of nationwide excitement seen in the past.\nLee's remarks appeared to refer to cable network JTBC's exclusive domestic broadcast of the Games.\nJTBC secured broadcast rights for the Olympics from 2026 through 2032 from the International Olympic Committee in 2019.\nHowever, negotiations to sublicense coverage to other Korean broadcasters ultimately collapsed, reportedly due to the high costs. 2.\nSouth Korea‚Äôs National Assembly is heading into what could be its longest plenary session, after an opposition-led filibuster was triggered by a series of controversial bills backed by the ruling party.\nDuring Tuesday's session, lawmakers first voted to approve the arrest of former Democratic Party lawmaker Kang Sun-woo, who is accused of accepting illegal campaign donations.\nThe ruling party then introduced revisions to the Commercial Act, along with three judicial reform bills that would expand the Supreme Court, establish a new appeals system, and penalize officials accused of distorting legal rulings.\nAs soon as the revision to the Commercial Act was reported to the floor, the People Power Party launched a filibuster --- with eight bills remaining on the agenda.\nThe plenary session came just hours after the Legislation and Judiciary Committee approved a special act on administrative integration for Jeollanam-do Province and Gwangju, led by the ruling Democratic Party.\nThe selective passage drew sharp criticism from the People Power Party, which said it does not oppose administrative integration in principle but accused the ruling party of fast-tracking bills for politically favorable regions without clear standards, including fiscal support.\nThe Democratic Party pushed back, accusing the opposition of holding the bills hostage through filibusters and blocking regional development, while parliamentary rules mean only one bill can be processed per day due to the 24-hour waiting period to end debate. 3.\nPresidential chief of staff Kang Hoon-sik has departed for the UAE to discuss cooperation on AI and the defense industry.\nHe's set to discuss follow-ups to last year's summit between President Lee Jae Myung and his UAE counterpart Mohamed bin Zayed Al Nahyan.\nThe two countries are reportedly looking for a possible joint development of a weapons system to expand arms cooperation beyond exports.\nIt's Kang's third visit to Abu Dhabi as a special presidential envoy for strategic economic cooperation. 4.\nStarting at 12:01 AM Tuesday, Eastern Standard Time, U.S.\nPresident Donald Trump's new \"global tariff\" officially took effect at a 10 percent rate on most imports from around the world.\nThis is 5 percentage points below the 15 percent rate President Trump announced over the weekend for all trading partners.\nFollowing a proclamation signed late last week under Section 122 of the Trade Act of 1974, the provision authorizes the president to impose temporary surcharges of up to 15 percent for a maximum of 150 days to address serious U.S. trade deficits or balance of payments imbalances, without prior approval from Congress.\nTrump's move came as a direct response to last Friday's Supreme Court decision, which struck down many of his earlier \"reciprocal\" and country-specific tariffs imposed under the International Emergency Economic Powers Act, ruling that the president had exceeded his authority.\nJust hours before the imposition of 15 percent tariff, U.S.\nCustoms and Border Protection issued guidance to importers confirming the initial 10 percent rate applies for now.\nThe global tariff does not apply to certain critical categories such as energy products, pharmaceuticals, and key agricultural goods, among others.\nIn response, China's Ministry of Commerce has urged the U.S. to revoke unilateral tariff measures and refrain from imposing new ones, while expressing willingness to engage in candid consultations during the upcoming sixth round of economic and trade talks between the two countries. 5.\nKim Yo-jong, the sister of North Korean leader Kim Jong-un, has been promoted from vice director of a department to the head of an undisclosed department at the ruling Workers' Party.\nAccording to North Korea's state-run Korea Central News Agency on Tuesday, the decision was made on Monday, the fifth day of the ninth Workers' Party Congress.\nKim Yo-jong was also reinstated as an alternate member of the Politburo, the Party's highest policymaking body, after having been demoted to an ordinary Central Committee member five years ago.\nThe KCNA also announced the five members of the Politburo Standing Committee, the regime's highest decision-making body when plenary meetings of the Party's Central Committee are not in session.\nRemarks by Kim Jong-un from Monday's meeting, where he said that no challenge or change in circumstances would be able to slow or stop the North's advance, were also reported.\nMoving to weather forecast, Most of the snow in central regions and Jeollabuk-do will let up tonight, while Jeollanam-do and Gyeongsang-do provinces could see a mix of rain and snow through tomorrow morning.\nBy the afternoon, Seoul gets up to 15 degrees under sunnier skies, but southern regions will be cloudy with Busan and Jeju topping out at 14 degrees with decent air quality nationwide.\nJeju is forecast to see more wet weather through the end of the week. 59:30‚Äô The current temperatures are: _______ degrees in Seoul _______ degrees in Gwangju. _______ degrees in Busan And _______ degrees on Jejudo Island 59:39‚Äô You‚Äôre listening to Arirang Radio 59:42‚Äô"};
    const rawVocabData = [{"word": "policymaking", "lemma": "policymake", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "", "translation_ko": "", "example_en": "", "context_sentence": "Kim Yo-jong was also reinstated as an alternate member of the Politburo, the Party's highest policymaking body, after having been demoted to an ordinary Central Committee member five years ago.", "cefr_level": "C2", "frequency_score": 8.0, "is_b2_plus": false, "derivatives": []}, {"word": "sublicense", "lemma": "sublicense", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "", "translation_ko": "", "example_en": "", "context_sentence": "However, negotiations to sublicense coverage to other Korean broadcasters ultimately collapsed, reportedly due to the high costs.", "cefr_level": "C2", "frequency_score": 7.6308, "is_b2_plus": false, "derivatives": []}, {"word": "JTBC", "lemma": "jtbc", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "", "translation_ko": "", "example_en": "", "context_sentence": "JTBC secured broadcast rights for the Olympics from 2026 through 2032 from the International Olympic Committee in 2019.", "cefr_level": "C1", "frequency_score": 6.9393, "is_b2_plus": false, "derivatives": []}, {"word": "sunnier", "lemma": "sunnier", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "bright and pleasant; promoting a feeling of cheer", "translation_ko": "", "example_en": "a cheery hello", "context_sentence": "By the afternoon, Seoul gets up to 15 degrees under sunnier skies, but southern regions will be cloudy with Busan and Jeju topping out at 14 degrees with decent air quality nationwide.", "cefr_level": "C1", "frequency_score": 6.8013, "is_b2_plus": false, "derivatives": ["cheery", "gay", "sunny"]}, {"word": "demoted", "lemma": "demote", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "assign to a lower position; reduce in rank", "translation_ko": "", "example_en": "She was demoted because she always speaks up", "context_sentence": "Kim Yo-jong was also reinstated as an alternate member of the Politburo, the Party's highest policymaking body, after having been demoted to an ordinary Central Committee member five years ago.", "cefr_level": "C1", "frequency_score": 6.71, "is_b2_plus": false, "derivatives": ["break", "bump", "kick downstairs", "relegate"]}, {"word": "penalize", "lemma": "penalize", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "impose a penalty on; inflict punishment on", "translation_ko": "", "example_en": "The students were penalized for showing up late for class", "context_sentence": "The ruling party then introduced revisions to the Commercial Act, along with three judicial reform bills that would expand the Supreme Court, establish a new appeals system, and penalize officials accused of distorting legal rulings.", "cefr_level": "C1", "frequency_score": 6.2596, "is_b2_plus": false, "derivatives": ["penalise", "punish"]}, {"word": "filibuster", "lemma": "filibuster", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "a legislator who gives long speeches in an effort to delay or obstruct legislation that he (or she) opposes", "translation_ko": "", "example_en": "", "context_sentence": "2. South Korea‚Äôs National Assembly is heading into what could be its longest plenary session, after an opposition-led filibuster was triggered by a series of controversial bills backed by the ruling party.", "cefr_level": "C1", "frequency_score": 6.1101, "is_b2_plus": false, "derivatives": ["filibusterer"]}, {"word": "lawmakers", "lemma": "lawmaker", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "a maker of laws; someone who gives a code of laws", "translation_ko": "", "example_en": "", "context_sentence": "During Tuesday's session, lawmakers first voted to approve the arrest of former Democratic Party lawmaker Kang Sun-woo, who is accused of accepting illegal campaign donations.", "cefr_level": "B2", "frequency_score": 5.9318, "is_b2_plus": false, "derivatives": ["lawgiver"]}, {"word": "distorting", "lemma": "distort", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "/d…™sÀàt…îÀêt/", "definition_en": "make false by mutilation or addition; as of a message or story", "translation_ko": "", "example_en": "", "context_sentence": "The ruling party then introduced revisions to the Commercial Act, along with three judicial reform bills that would expand the Supreme Court, establish a new appeals system, and penalize officials accused of distorting legal rulings.", "cefr_level": "B2", "frequency_score": 5.9208, "is_b2_plus": false, "derivatives": ["color", "colour", "contort", "deform", "falsify", "garble", "strain", "tinge", "twine", "twist", "warp", "wring"]}, {"word": "importers", "lemma": "importer", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "someone whose business involves importing goods from outside (especially from a foreign country)", "translation_ko": "", "example_en": "", "context_sentence": "Just hours before the imposition of 15 percent tariff, U.S. Customs and Border Protection issued guidance to importers confirming the initial 10 percent rate applies for now.", "cefr_level": "B2", "frequency_score": 5.9208, "is_b2_plus": false, "derivatives": []}, {"word": "reinstated", "lemma": "reinstate", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "restore to the previous state or rank", "translation_ko": "", "example_en": "", "context_sentence": "Kim Yo-jong was also reinstated as an alternate member of the Politburo, the Party's highest policymaking body, after having been demoted to an ordinary Central Committee member five years ago.", "cefr_level": "B2", "frequency_score": 5.9101, "is_b2_plus": false, "derivatives": ["reestablish", "restore"]}, {"word": "plenary", "lemma": "plenary", "pos": "ADJ", "pos_ko": "ÌòïÏö©ÏÇ¨", "phonetic": "/ÀàpliÀên…ô…πi/", "definition_en": "full in all respects", "translation_ko": "", "example_en": "a plenary session of the legislature", "context_sentence": "2. South Korea‚Äôs National Assembly is heading into what could be its longest plenary session, after an opposition-led filibuster was triggered by a series of controversial bills backed by the ruling party.", "cefr_level": "B2", "frequency_score": 5.8996, "is_b2_plus": false, "derivatives": []}, {"word": "surcharges", "lemma": "surcharge", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "/Ààs…úÀê(…π)tÕ° É…ëÀê(…π)dÕ° í/", "definition_en": "an additional charge (as for items previously omitted or as a penalty for failure to exercise common caution or common skill)", "translation_ko": "", "example_en": "Our airline tickets cost twenty dollars more than we expected because we had to pay a fuel surcharge.", "context_sentence": "Following a proclamation signed late last week under Section 122 of the Trade Act of 1974, the provision authorizes the president to impose temporary surcharges of up to 15 percent for a maximum of 150 days to address serious U.S. trade deficits or balance of payments imbalances, without prior approval from Congress.", "cefr_level": "B2", "frequency_score": 5.8794, "is_b2_plus": false, "derivatives": ["fleece", "gazump", "hook", "overcharge", "pluck", "plume", "rob", "soak"]}, {"word": "imposition", "lemma": "imposition", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "the act of imposing something (as a tax or an embargo)", "translation_ko": "", "example_en": "", "context_sentence": "Just hours before the imposition of 15 percent tariff, U.S. Customs and Border Protection issued guidance to importers confirming the initial 10 percent rate applies for now.", "cefr_level": "B2", "frequency_score": 5.8097, "is_b2_plus": false, "derivatives": ["infliction"]}, {"word": "reciprocal", "lemma": "reciprocal", "pos": "ADJ", "pos_ko": "ÌòïÏö©ÏÇ¨", "phonetic": "", "definition_en": "something (a term or expression or concept) that has a reciprocal relation to something else", "translation_ko": "", "example_en": "risk is the reciprocal of safety", "context_sentence": "Trump's move came as a direct response to last Friday's Supreme Court decision, which struck down many of his earlier \"reciprocal\" and country-specific tariffs imposed under the International Emergency Economic Powers Act, ruling that the president had exceeded his authority.", "cefr_level": "B2", "frequency_score": 5.7799, "is_b2_plus": false, "derivatives": ["multiplicative inverse", "mutual", "reciprocal cross"]}, {"word": "revoke", "lemma": "revoke", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "the mistake of not following suit when able to do so", "translation_ko": "", "example_en": "", "context_sentence": "In response, China's Ministry of Commerce has urged the U.S. to revoke unilateral tariff measures and refrain from imposing new ones, while expressing willingness to engage in candid consultations during the upcoming sixth round of economic and trade talks between the two countries.", "cefr_level": "B2", "frequency_score": 5.7399, "is_b2_plus": false, "derivatives": ["annul", "countermand", "lift", "overturn", "renege", "repeal", "rescind", "reverse", "vacate"]}, {"word": "unilateral", "lemma": "unilateral", "pos": "ADJ", "pos_ko": "ÌòïÏö©ÏÇ¨", "phonetic": "", "definition_en": "involving only one part or side", "translation_ko": "", "example_en": "unilateral paralysis", "context_sentence": "In response, China's Ministry of Commerce has urged the U.S. to revoke unilateral tariff measures and refrain from imposing new ones, while expressing willingness to engage in candid consultations during the upcoming sixth round of economic and trade talks between the two countries.", "cefr_level": "B2", "frequency_score": 5.6498, "is_b2_plus": true, "derivatives": ["one-sided"]}, {"word": "undisclosed", "lemma": "undisclosed", "pos": "ADJ", "pos_ko": "ÌòïÏö©ÏÇ¨", "phonetic": "", "definition_en": "not made known", "translation_ko": "", "example_en": "", "context_sentence": "5. Kim Yo-jong, the sister of North Korean leader Kim Jong-un, has been promoted from vice director of a department to the head of an undisclosed department at the ruling Workers' Party.", "cefr_level": "B2", "frequency_score": 5.6308, "is_b2_plus": false, "derivatives": ["unrevealed"]}, {"word": "authorizes", "lemma": "authorize", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "/Àà…ëŒ∏…ô…πa…™z/", "definition_en": "grant authorization or clearance for", "translation_ko": "", "example_en": "Clear the manuscript for publication", "context_sentence": "Following a proclamation signed late last week under Section 122 of the Trade Act of 1974, the provision authorizes the president to impose temporary surcharges of up to 15 percent for a maximum of 150 days to address serious U.S. trade deficits or balance of payments imbalances, without prior approval from Congress.", "cefr_level": "B2", "frequency_score": 5.6198, "is_b2_plus": false, "derivatives": ["authorise", "clear", "empower", "pass"]}, {"word": "proclamation", "lemma": "proclamation", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "/Àåp…π…íkl…ôÀàme…™ É…ôn/", "definition_en": "a formal public statement", "translation_ko": "", "example_en": "the government made an announcement about changes in the drug war", "context_sentence": "Following a proclamation signed late last week under Section 122 of the Trade Act of 1974, the provision authorizes the president to impose temporary surcharges of up to 15 percent for a maximum of 150 days to address serious U.S. trade deficits or balance of payments imbalances, without prior approval from Congress.", "cefr_level": "B2", "frequency_score": 5.5607, "is_b2_plus": false, "derivatives": ["announcement", "annunciation", "declaration", "promulgation"]}, {"word": "candid", "lemma": "candid", "pos": "ADJ", "pos_ko": "ÌòïÏö©ÏÇ¨", "phonetic": "", "definition_en": "characterized by directness in manner or speech; without subtlety or evasion", "translation_ko": "", "example_en": "blunt talking and straight shooting", "context_sentence": "In response, China's Ministry of Commerce has urged the U.S. to revoke unilateral tariff measures and refrain from imposing new ones, while expressing willingness to engage in candid consultations during the upcoming sixth round of economic and trade talks between the two countries.", "cefr_level": "B2", "frequency_score": 5.5498, "is_b2_plus": false, "derivatives": ["blunt", "forthright", "frank", "free-spoken", "heart-to-heart", "open", "outspoken", "plainspoken", "point-blank", "straight-from-the-shoulder"]}, {"word": "imbalances", "lemma": "imbalance", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "a lack of balance or state of disequilibrium", "translation_ko": "", "example_en": "a hormonal imbalance", "context_sentence": "Following a proclamation signed late last week under Section 122 of the Trade Act of 1974, the provision authorizes the president to impose temporary surcharges of up to 15 percent for a maximum of 150 days to address serious U.S. trade deficits or balance of payments imbalances, without prior approval from Congress.", "cefr_level": "B2", "frequency_score": 5.5406, "is_b2_plus": false, "derivatives": ["asymmetry", "dissymmetry", "instability", "unbalance"]}, {"word": "envoy", "lemma": "envoy", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "/Àà…õn.v…î…™/", "definition_en": "a diplomat having less authority than an ambassador", "translation_ko": "", "example_en": "", "context_sentence": "It's Kang's third visit to Abu Dhabi as a special presidential envoy for strategic economic cooperation.", "cefr_level": "B2", "frequency_score": 5.52, "is_b2_plus": false, "derivatives": ["emissary", "envoi", "envoy extraordinary", "minister plenipotentiary"]}, {"word": "tariff", "lemma": "tariff", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "/Ààt√¶…π…ôf/", "definition_en": "a government tax on imports or exports", "translation_ko": "", "example_en": "they signed a treaty to lower duties on trade between their countries", "context_sentence": "Starting at 12:01 AM Tuesday, Eastern Standard Time, U.S. President Donald Trump's new \"global tariff\" officially took effect at a 10 percent rate on most imports from around the world.", "cefr_level": "B2", "frequency_score": 5.51, "is_b2_plus": true, "derivatives": ["duty"]}, {"word": "cloudy", "lemma": "cloudy", "pos": "ADJ", "pos_ko": "ÌòïÏö©ÏÇ¨", "phonetic": "", "definition_en": "lacking definite form or limits; - H.T.Moore", "translation_ko": "", "example_en": "gropes among cloudy issues toward a feeble conclusion", "context_sentence": "By the afternoon, Seoul gets up to 15 degrees under sunnier skies, but southern regions will be cloudy with Busan and Jeju topping out at 14 degrees with decent air quality nationwide.", "cefr_level": "B2", "frequency_score": 5.4498, "is_b2_plus": false, "derivatives": ["mirky", "muddy", "murky", "nebulose", "nebulous", "turbid"]}, {"word": "resilience", "lemma": "resilience", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "/…π…ô.z…™l.…™.…ôns/", "definition_en": "the physical property of a material that can return to its original shape or position after deformation that does not exceed its elastic limit", "translation_ko": "", "example_en": "", "context_sentence": "Speaking at a Cabinet meeting on Tuesday, President Lee praised Team Korea's determination and resilience.", "cefr_level": "B2", "frequency_score": 5.4202, "is_b2_plus": false, "derivatives": ["resiliency"]}, {"word": "broadcasters", "lemma": "broadcaster", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "someone who broadcasts on radio or television", "translation_ko": "", "example_en": "", "context_sentence": "However, negotiations to sublicense coverage to other Korean broadcasters ultimately collapsed, reportedly due to the high costs.", "cefr_level": "B2", "frequency_score": 5.3696, "is_b2_plus": false, "derivatives": ["spreader"]}, {"word": "refrain", "lemma": "refrain", "pos": "VERB", "pos_ko": "ÎèôÏÇ¨", "phonetic": "", "definition_en": "the part of a song where a soloist is joined by a group of singers", "translation_ko": "", "example_en": "", "context_sentence": "In response, China's Ministry of Commerce has urged the U.S. to revoke unilateral tariff measures and refrain from imposing new ones, while expressing willingness to engage in candid consultations during the upcoming sixth round of economic and trade talks between the two countries.", "cefr_level": "B2", "frequency_score": 5.3696, "is_b2_plus": false, "derivatives": ["abstain", "chorus", "desist", "forbear"]}, {"word": "circumstances", "lemma": "circumstance", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "", "definition_en": "a condition that accompanies or influences some event or activity", "translation_ko": "", "example_en": "", "context_sentence": "Remarks by Kim Jong-un from Monday's meeting, where he said that no challenge or change in circumstances would be able to slow or stop the North's advance, were also reported.", "cefr_level": "B2", "frequency_score": 5.3401, "is_b2_plus": false, "derivatives": ["condition", "consideration", "context", "setting"]}, {"word": "remarks", "lemma": "remark", "pos": "NOUN", "pos_ko": "Î™ÖÏÇ¨", "phonetic": "/…π…™Ààm…ëÀêk/", "definition_en": "a statement that expresses a personal opinion or belief or adds information", "translation_ko": "", "example_en": "from time to time she contributed a personal comment on his account", "context_sentence": "Lee's remarks appeared to refer to cable network JTBC's exclusive domestic broadcast of the Games.", "cefr_level": "B2", "frequency_score": 5.3401, "is_b2_plus": false, "derivatives": ["comment", "input", "mention", "note", "notice", "observe", "point out"]}];
    const vocabData = JSON.parse(JSON.stringify(rawVocabData));
    const bookmarksKey = "arirang_bookmarks";

    function escHtml(s) {
      return String(s ?? "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#39;");
    }

    function loadBookmarks() {
      try {
        return JSON.parse(localStorage.getItem(bookmarksKey) || "{}");
      } catch (_) {
        return {};
      }
    }

    function saveBookmarks(bm) {
      localStorage.setItem(bookmarksKey, JSON.stringify(bm));
    }

    function cefrClass(level) {
      if (level === "C2") return "mark-c2";
      if (level === "C1") return "mark-c1";
      if (level === "B2") return "mark-b2";
      return "";
    }

    function openCard(lemma) {
      const el = document.getElementById("card-" + lemma);
      if (!el) return;
      el.classList.add("open");
      el.scrollIntoView({ behavior: "smooth", block: "center" });
    }

    function renderHeader() {
      document.getElementById("news-title").textContent = episode.title || "Arirang News";
      document.getElementById("news-meta").innerHTML =
        "<span>" + escHtml(episode.date_display || "") + "</span>" +
        "<span>‚Ä¢</span>" +
        "<span>" + escHtml(episode.airtime || "21:55") + "</span>";

      document.getElementById("vocab-count-badge").textContent = "Ïñ¥Ìúò " + vocabData.length + "Í∞ú";

      const dist = { B2:0, C1:0, C2:0 };
      for (const v of vocabData) {
        if (v.cefr_level === "B2") dist.B2++;
        if (v.cefr_level === "C1") dist.C1++;
        if (v.cefr_level === "C2") dist.C2++;
      }
      const max = Math.max(1, dist.B2, dist.C1, dist.C2);
      const chart = document.getElementById("cefr-chart");
      chart.innerHTML = ["B2","C1","C2"].map(k => {
        const h = Math.max(6, Math.round((dist[k] / max) * 56));
        return "<div class='cefr-col'>" +
               "<div class='cefr-bar' style='height:" + h + "px'></div>" +
               "<div>" + k + "</div>" +
               "</div>";
      }).join("");
    }

    function renderAudio() {
      const section = document.getElementById("audio-section");
      const player = document.getElementById("audio-player");
      if (!episode.mp3_filename && !episode.mp3_url) {
        section.style.display = "none";
        return;
      }
      if (episode.mp3_filename) {
        // report file is in reports/, media files are in downloads/
        player.src = "../downloads/" + episode.mp3_filename;
      } else {
        player.src = episode.mp3_url;
      }
    }

    function renderScript() {
      const box = document.getElementById("script-box");
      const toggle = document.getElementById("script-toggle");
      let text = escHtml(episode.script_text || "");
      if (!text) {
        box.textContent = "Ïä§ÌÅ¨Î¶ΩÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§.";
        toggle.style.display = "none";
        return;
      }

      const sorted = [...vocabData]
        .filter(v => v.word)
        .sort((a,b) => String(b.word).length - String(a.word).length);

      for (const item of sorted) {
        const word = String(item.word || "").trim();
        if (!word) continue;
        const lemma = String(item.lemma || "").trim();
        const cls = cefrClass(item.cefr_level);
        const pattern = new RegExp("\\b(" + word.replace(/[.*+?^${}()|[\\]\\]/g, "\\$&") + ")\\b", "gi");
        text = text.replace(pattern, (m) => {
          return "<mark class='" + cls + "' data-lemma='" + escHtml(lemma) + "'>" + escHtml(m) + "</mark>";
        });
      }

      box.innerHTML = text;
      box.querySelectorAll("mark[data-lemma]").forEach((el) => {
        el.addEventListener("click", () => openCard(el.getAttribute("data-lemma")));
      });

      toggle.addEventListener("click", () => {
        box.classList.toggle("expanded");
        toggle.textContent = box.classList.contains("expanded") ? "Ï†ëÍ∏∞" : "Ï†ÑÏ≤¥Î≥¥Í∏∞";
      });
    }

    function renderCards() {
      const bm = loadBookmarks();
      const grid = document.getElementById("cards-grid");
      grid.innerHTML = vocabData.map((v) => {
        const lemma = escHtml(v.lemma || "");
        const ko = String(v.translation_ko || "").trim() || "ÏÇ¨Ï†Ñ ÎØ∏Îì±Î°ù";
        const deriv = Array.isArray(v.derivatives) ? v.derivatives : [];
        const tags = deriv.map(x => "<span class='tag'>" + escHtml(x) + "</span>").join("");
        const bookmarked = bm[v.word] ? "bookmarked" : "";
        const pressed = bm[v.word] ? "true" : "false";
        return "<article class='v-card " + bookmarked + "' id='card-" + lemma + "'>" +
               "<button class='bookmark-btn' data-word='" + escHtml(v.word) + "' aria-pressed='" + pressed + "'>üîñ</button>" +
               "<div class='card-top'>" +
               "<span class='word'>" + escHtml(v.word || "") + "</span>" +
               "<span class='cefr'>" + escHtml(v.cefr_level || "") + "</span>" +
               "<span class='phonetic'>" + escHtml(v.phonetic || "") + "</span>" +
               "</div>" +
               "<div class='sub'>" + escHtml(v.pos_ko || "") + " ¬∑ ÎπàÎèÑÏ†êÏàò " + escHtml(v.frequency_score) + "</div>" +
               "<div class='card-body'>" +
               "<div class='def-box'>" + escHtml(v.definition_en || "") + "</div>" +
               "<div class='ko'>" + escHtml(ko) + "</div>" +
               "<div class='example'>" + escHtml(v.example_en || "") + "</div>" +
               "<div class='context'>" + escHtml(v.context_sentence || "") + "</div>" +
               "<div class='tags'>" + tags + "</div>" +
               "</div>" +
               "</article>";
      }).join("");

      grid.querySelectorAll(".v-card").forEach((card) => {
        card.addEventListener("click", (ev) => {
          if (ev.target && ev.target.classList.contains("bookmark-btn")) return;
          card.classList.toggle("open");
        });
      });

      grid.querySelectorAll(".bookmark-btn").forEach((btn) => {
        btn.addEventListener("click", (ev) => {
          ev.stopPropagation();
          const word = btn.getAttribute("data-word");
          const store = loadBookmarks();
          store[word] = !store[word];
          if (!store[word]) delete store[word];
          saveBookmarks(store);
          renderCards();
          updateBookmarkCount();
        });
      });
    }

    function updateBookmarkCount() {
      const bm = loadBookmarks();
      const n = Object.keys(bm).length;
      document.getElementById("bookmark-count-badge").textContent = "Î∂ÅÎßàÌÅ¨ " + n + "Í∞ú";
    }

    function shuffle(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function buildQuizItems() {
      const withCtx = vocabData.filter(v => v.context_sentence && v.word);
      const picked = shuffle(withCtx).slice(0, 5);
      const words = vocabData.map(v => v.word).filter(Boolean);
      return picked.map((q, idx) => {
        const answer = q.word;
        const wrongPool = shuffle(words.filter(w => w !== answer)).slice(0, 3);
        const choices = shuffle([answer, ...wrongPool]);
        const stem = q.context_sentence.replace(new RegExp("\\b" + answer.replace(/[.*+?^${}()|[\\]\\]/g, "\\$&") + "\\b", "i"), "______");
        return {
          id: idx + 1,
          answer,
          choices,
          stem,
          definition: q.definition_en || ""
        };
      });
    }

    function renderQuiz() {
      const list = document.getElementById("quiz-list");
      const scoreEl = document.getElementById("quiz-score");
      const progress = document.getElementById("quiz-progress");
      const items = buildQuizItems();
      if (!items.length) {
        document.getElementById("quiz-section").style.display = "none";
        return;
      }

      let answered = 0;
      let correct = 0;

      function refresh() {
        scoreEl.textContent = correct + " / " + items.length;
        progress.style.width = Math.round((answered / items.length) * 100) + "%";
      }

      list.innerHTML = items.map((q) => {
        return "<div class='q' data-id='" + q.id + "'>" +
               "<div class='stem'><strong>Q" + q.id + ".</strong> " + escHtml(q.stem) + "</div>" +
               "<div class='choices'>" +
               q.choices.map(c => "<button class='choice' data-choice='" + escHtml(c) + "'>" + escHtml(c) + "</button>").join("") +
               "</div>" +
               "<div class='q-result'></div>" +
               "</div>";
      }).join("");

      list.querySelectorAll(".q").forEach((qEl) => {
        const id = Number(qEl.getAttribute("data-id"));
        const q = items.find(x => x.id === id);
        if (!q) return;
        let done = false;
        qEl.querySelectorAll(".choice").forEach((btn) => {
          btn.addEventListener("click", () => {
            if (done) return;
            done = true;
            answered++;
            const picked = btn.getAttribute("data-choice");
            const result = qEl.querySelector(".q-result");
            qEl.querySelectorAll(".choice").forEach((b) => {
              const val = b.getAttribute("data-choice");
              if (val === q.answer) b.classList.add("correct");
            });
            if (picked === q.answer) {
              correct++;
              btn.classList.add("correct");
              result.textContent = "Ï†ïÎãµ! " + (q.definition ? q.definition : "");
            } else {
              btn.classList.add("wrong");
              result.textContent = "Ïò§Îãµ. Ï†ïÎãµ: " + q.answer + (q.definition ? " | " + q.definition : "");
            }
            refresh();
          });
        });
      });

      refresh();
    }

    renderHeader();
    renderAudio();
    renderScript();
    renderCards();
    updateBookmarkCount();
    renderQuiz();
  </script>
</body>
</html>
